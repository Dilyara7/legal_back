(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{1007:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(9946).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1851:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>N});var t=s(5155),a=s(2115),i=s(6874),l=s.n(i),d=s(5695),n=s(7168),o=s(9852),c=s(8482),m=s(2714),u=s(5139),f=s(5339),x=s(1007),h=s(8883),p=s(2919),g=s(8749),v=s(2657),b=s(9026),w=s(1952);function N(){let e=(0,d.useRouter)(),{t:r}=(0,w.o)(),[s,i]=(0,a.useState)({username:"",email:"",password:"",confirmPassword:""}),[N,j]=(0,a.useState)(!1),[y,k]=(0,a.useState)(!1),[C,R]=(0,a.useState)(!1),[S,P]=(0,a.useState)({}),A=e=>{let{name:r,value:s}=e.target;i(e=>({...e,[r]:s})),S[r]&&P(e=>{let s={...e};return delete s[r],s})},T=()=>{let e={};return s.username.trim()||(e.username=r.auth.register.errors.emptyUsername),s.email.trim()?/\S+@\S+\.\S+/.test(s.email)||(e.email=r.auth.register.errors.invalidEmail):e.email=r.auth.register.errors.emptyEmail,s.password?s.password.length<8&&(e.password=r.auth.register.errors.shortPassword):e.password=r.auth.register.errors.emptyPassword,s.password!==s.confirmPassword&&(e.confirmPassword=r.auth.register.errors.passwordMismatch),N||(e.terms=r.auth.register.errors.agreeTerms),P(e),0===Object.keys(e).length},F=async t=>{if(t.preventDefault(),T())try{R(!0);let t=await fetch("".concat("http://127.0.0.1:8000","/api/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s.username,email:s.email,password:s.password})}),a=await t.json();if(!t.ok){if(a.username)P({username:a.username[0]});else if(a.email)P({email:a.email[0]});else if(a.password)P({password:a.password[0]});else throw Error(r.auth.register.errors.generalError);return}a.access&&a.refresh&&(sessionStorage.setItem("accessToken",a.access),sessionStorage.setItem("refreshToken",a.refresh)),e.push("/login?registered=true")}catch(e){P({form:e instanceof Error?e.message:r.auth.register.errors.generalError})}finally{R(!1)}};return(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("section",{className:"flex-grow text-center py-12 bg-gray-800 text-white flex flex-col justify-center",children:[(0,t.jsx)("h2",{className:"text-4xl font-bold",children:r.auth.register.title}),(0,t.jsx)("p",{className:"mt-4 text-lg max-w-2xl mx-auto",children:r.auth.register.subtitle})]}),(0,t.jsx)("section",{className:"py-16 px-6 container mx-auto",children:(0,t.jsxs)(c.Zp,{className:"max-w-md mx-auto shadow-lg",children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{className:"text-2xl",children:r.auth.register.formTitle}),(0,t.jsx)(c.BT,{children:r.auth.register.formSubtitle})]}),(0,t.jsxs)("form",{onSubmit:F,children:[(0,t.jsxs)(c.Wu,{className:"space-y-4",children:[S.form&&(0,t.jsxs)(b.Fc,{variant:"destructive",children:[(0,t.jsx)(f.A,{className:"h-4 w-4"}),(0,t.jsx)(b.XL,{children:"Ошибка"}),(0,t.jsx)(b.TN,{children:S.form})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"username",children:r.auth.register.username}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(x.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,t.jsx)(o.p,{id:"username",name:"username",placeholder:"username",className:"pl-10 ".concat(S.username?"border-red-500":""),value:s.username,onChange:A,disabled:C})]}),S.username&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.username})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"email",children:r.auth.register.email}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,t.jsx)(o.p,{id:"email",name:"email",type:"email",placeholder:"example@mail.ru",className:"pl-10 ".concat(S.email?"border-red-500":""),value:s.email,onChange:A,disabled:C})]}),S.email&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.email})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"password",children:r.auth.register.password}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(p.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,t.jsx)(o.p,{id:"password",name:"password",type:y?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 ".concat(S.password?"border-red-500":""),value:s.password,onChange:A,disabled:C}),(0,t.jsx)(n.$,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 text-gray-400 hover:text-gray-600",onClick:()=>k(!y),children:y?(0,t.jsx)(g.A,{size:16}):(0,t.jsx)(v.A,{size:16})})]}),S.password&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.password})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"confirmPassword",children:r.auth.register.confirmPassword}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(p.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,t.jsx)(o.p,{id:"confirmPassword",name:"confirmPassword",type:y?"text":"password",placeholder:"••••••••",className:"pl-10 ".concat(S.confirmPassword?"border-red-500":""),value:s.confirmPassword,onChange:A,disabled:C})]}),S.confirmPassword&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.confirmPassword})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)(u.S,{id:"terms",checked:N,onCheckedChange:e=>j(e),disabled:C,className:S.terms?"border-red-500":""}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(m.J,{htmlFor:"terms",className:"text-sm cursor-pointer",children:[r.auth.register.agreeTerms," ",(0,t.jsx)(l(),{href:"/terms",className:"text-blue-600 hover:underline",children:r.auth.register.termsLink})," ","и"," ",(0,t.jsx)(l(),{href:"/privacy",className:"text-blue-600 hover:underline",children:r.auth.register.privacyLink})]}),S.terms&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.terms})]})]})]}),(0,t.jsxs)(c.wL,{className:"flex flex-col space-y-4",children:[(0,t.jsx)(n.$,{type:"submit",className:"w-full",disabled:C,children:C?"Регистрация...":r.auth.register.registerButton}),(0,t.jsxs)("div",{className:"text-center text-sm",children:[r.auth.register.haveAccount," ",(0,t.jsx)(l(),{href:"/login",className:"text-blue-600 hover:underline",children:r.auth.register.loginLink})]})]})]})]})})]})}},2714:(e,r,s)=>{"use strict";s.d(r,{J:()=>o});var t=s(5155),a=s(2115),i=s(968),l=s(2085),d=s(3999);let n=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(i.b,{ref:r,className:(0,d.cn)(n(),s),...a})});o.displayName=i.b.displayName},5139:(e,r,s)=>{"use strict";s.d(r,{S:()=>n});var t=s(5155),a=s(2115),i=s(7820),l=s(5196),d=s(3999);let n=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(i.bL,{ref:r,className:(0,d.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...a,children:(0,t.jsx)(i.C1,{className:(0,d.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(l.A,{className:"h-4 w-4"})})})});n.displayName=i.bL.displayName},7168:(e,r,s)=>{"use strict";s.d(r,{$:()=>o,r:()=>n});var t=s(5155),a=s(2115),i=s(9708),l=s(2085),d=s(3999);let n=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,r)=>{let{className:s,variant:a,size:l,asChild:o=!1,...c}=e,m=o?i.DX:"button";return(0,t.jsx)(m,{className:(0,d.cn)(n({variant:a,size:l,className:s})),ref:r,...c})});o.displayName="Button"},7750:(e,r,s)=>{Promise.resolve().then(s.bind(s,1851))},8482:(e,r,s)=>{"use strict";s.d(r,{BT:()=>o,Wu:()=>c,ZB:()=>n,Zp:()=>l,aR:()=>d,wL:()=>m});var t=s(5155),a=s(2115),i=s(3999);let l=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});l.displayName="Card";let d=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...a})});d.displayName="CardHeader";let n=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});n.displayName="CardTitle";let o=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",s),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent";let m=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",s),...a})});m.displayName="CardFooter"},9026:(e,r,s)=>{"use strict";s.d(r,{Fc:()=>n,TN:()=>c,XL:()=>o});var t=s(5155),a=s(2115),i=s(2085),l=s(3999);let d=(0,i.F)("relative w-full rounded-lg border p-4 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),n=a.forwardRef((e,r)=>{let{className:s,variant:a,...i}=e;return(0,t.jsx)("div",{ref:r,role:"alert",className:(0,l.cn)(d({variant:a}),s),...i})});n.displayName="Alert";let o=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("h5",{ref:r,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})});o.displayName="AlertTitle";let c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",s),...a})});c.displayName="AlertDescription"},9852:(e,r,s)=>{"use strict";s.d(r,{p:()=>l});var t=s(5155),a=s(2115),i=s(3999);let l=a.forwardRef((e,r)=>{let{className:s,type:a,...l}=e;return(0,t.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...l})});l.displayName="Input"}},e=>{var r=r=>e(e.s=r);e.O(0,[277,438,828,214,441,684,358],()=>r(7750)),_N_E=e.O()}]);